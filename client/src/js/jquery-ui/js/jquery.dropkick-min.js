(function(t,e,i){"use strict";var n=navigator.userAgent.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/),a=!!n,d=a&&parseFloat(n[1])<7,r=navigator.userAgent.match(/iPad|iPhone|Android|IEMobile|BlackBerry/i),o=a?"mousedown":"click",l="onwheel"in e?"wheel":"onmousewheel"in i?"mousewheel":"MouseScrollEvent"in e&&"DOMMouseScroll MozMousePixelScroll",s={fired:!1,fire:function(){t(i).on(o,".dk_options a",function(){var e=t(this),i=e.parent(),n=e.parents(".dk_container").first();return i.hasClass("disabled")||i.closest(".dk_optgroup",n).hasClass("disabled")||(i.hasClass("dk_option_current")||(b(e,n),$(e.parent(),n)),m(n)),!1}).on(l,".dk_options_inner",function(t){var e=t.originalEvent.wheelDelta||-t.originalEvent.deltaY||-t.originalEvent.detail;return a?(this.scrollTop-=Math.round(e/10),!1):e>0&&this.scrollTop<=0||0>e&&this.scrollTop>=this.scrollHeight-this.offsetHeight?!1:!0}).on({"keydown.dk_nav":function(t){var e=v||_;e&&A(t,e)},click:function(e){var i,n=t(e.target);if(v&&0===n.closest(".dk_container").length)m(v);else{if(n.is(".dk_toggle, .dk_label"))return i=n.parents(".dk_container").first(),i.hasClass("dk_open")?m(i):(v&&m(v),!i.attr("disabled")&&x(i,e)),!1;n.attr("for")&&t("#dk_container_"+n.attr("for"))[0]&&t("#dk_container_"+n.attr("for")).trigger("focus.dropkick")}}}),this.fired=!0}},p={},c=[],f={left:37,up:38,right:39,down:40,enter:13,tab:9,zero:48,z:90,last:221},u=['<div class="dk_container" id="dk_container_{{ id }}" tabindex="{{ tabindex }}" aria-hidden="true">','<a class="dk_toggle dk_label">{{ label }}</a>','<div class="dk_options">','<ul class="dk_options_inner" role="main" aria-hidden="true">',"</ul>","</div>","</div>"].join(""),h='<li class="{{ current }}{{ disabled }}"><a data-dk-dropdown-value="{{ value }}">{{ text }}</a></li>',k='<li class="dk_optgroup{{ disabled }}"><span>{{ text }}</span>',g={startSpeed:400,theme:!1,changes:!1,syncReverse:!0,nativeMobile:!0,autoWidth:!0},v=null,_=null,b=function(t,e,i){var n=e.data("dropkick"),a=n.$select,d=t.length?t:n.$original,r=d.attr("data-dk-dropdown-value")||t.attr("value"),o=d.text();e.find(".dk_label").html(o?o:"&nbsp;"),i?a.val(r):a.val(r).trigger("change"),n.settings.change&&!i&&!n.settings.syncReverse&&n.settings.change.call(a,r,o)},m=function(t){t.removeClass("dk_open dk_open_top"),v=null},C=function(i){if(i.data("dropkick").settings.fixedMove)return"up"==i.data("dropkick").settings.fixedMove?!1:!0;var n=i.find(".dk_toggle"),a=i.find(".dk_options").outerHeight(),d=t(e).height()-n.outerHeight()-n.offset().top+t(e).scrollTop(),r=n.offset().top-t(e).scrollTop();return r>a?d>a:!0},w=function(t,e,i){var n=t.find(".dk_options_inner"),a=e.prevAll("li").outerHeight()*e.prevAll("li").length+(e.closest(".dk_optgroup",n).length&&e.closest(".dk_optgroup",n).prevAll("li").outerHeight()*e.closest(".dk_optgroup",n).prevAll("li").length),d=n.scrollTop(),r=n.height()+n.scrollTop()-e.outerHeight();(i&&"keydown"===i.type||d>a||a>r)&&n.scrollTop(a)},x=function(t,e){var i=C(t),n="dk_open"+(i?"":" dk_open_top");t.find(".dk_options").css({top:i?t.find(".dk_toggle").outerHeight()-1:"",bottom:i?"":t.find(".dk_toggle").outerHeight()-1}),v=t.addClass(n),w(t,t.find(".dk_option_current"),e)},$=function(t,e,i){e.find(".dk_option_current").removeClass("dk_option_current"),t.addClass("dk_option_current"),w(e,t,i)},A=function(e,i){var n,a,d,r,o,l,s,p=e.keyCode,c=i.data("dropkick"),u=String.fromCharCode(p),h=i.find(".dk_options"),k=i.hasClass("dk_open"),g=h.find("li:not(.disabled)"),v=i.find(".dk_option_current"),_=v.closest(".dk_optgroup",h),C=g.first().hasClass("dk_optgroup")?g.first().find("li:not(.disabled)").first():g.first(),w=g.last().hasClass("dk_optgroup")?g.last().find("li:not(.disabled)").last():g.last();switch(p){case f.enter:k?v.hasClass("disabled")||(b(v.find("a"),i),m(i)):x(i,e),e.preventDefault();break;case f.tab:k&&(v.length&&b(v.find("a"),i),m(i));break;case f.up:k?(a=v.prevAll("li:not(.disabled)").first(),a.hasClass("dk_optgroup")&&(a=a.find("li:not(.disabled)").last()),!a.length&&_.length&&(a=_.prevAll("li:not(.disabled)").first().hasClass("dk_optgroup")?_.prevAll("li:not(.disabled)").first().find("li:not(.disabled)").last():_.prevAll("li:not(.disabled)").first()),$(a.length?a:w,i,e)):x(i,e),e.preventDefault();break;case f.down:k?(n=v.nextAll("li:not(.disabled)").first(),n.hasClass("dk_optgroup")&&(n=n.find("li:not(.disabled)").first()),!n.length&&_.length&&(n=_.nextAll("li:not(.disabled)").first().hasClass("dk_optgroup")?_.nextAll("li:not(.disabled)").first().find("li:not(.disabled)").first():_.nextAll("li:not(.disabled)").first()),$(n.length?n:C,i,e)):x(i,e),e.preventDefault()}if(p>=f.zero&&p<=f.z){for(d=(new Date).getTime(),null===c.finder||void 0===c.finder?(c.finder=u.toUpperCase(),c.timer=d):d>parseInt(c.timer,10)+1e3?(c.finder=u.toUpperCase(),c.timer=d):(c.finder=c.finder+u.toUpperCase(),c.timer=d),r=g.find("a"),o=0,l=r.length;l>o;o++)if(s=t(r[o]),0===s.html().toUpperCase().indexOf(c.finder)&&!s.closest(".dk_optgroup",h).hasClass("disabled")){b(s,i),$(s.parent(),i,e);break}i.data("dropkick",c)}},y=function(e){return t.trim(e).length>0?e:!1},T=function(e,i){var n,a,d,r,o,l=function(e){var n=e.val(),a=e.html(),d=void 0!==e.attr("disabled");return h.replace("{{ value }}",n).replace("{{ current }}",y(n)!==i.value||d?"":"dk_option_current").replace("{{ disabled }}",d?"disabled":"").replace("{{ text }}",t.trim(a)?t.trim(a):"&nbsp;")},s=e.replace("{{ id }}",i.id).replace("{{ label }}",i.label).replace("{{ tabindex }}",i.tabindex),p=[];if(i.options&&i.options.length)for(a=0,d=i.options.length;d>a;a++){if(r=t(i.options[a]),r.is("option"))o=0===a&&void 0!==r.attr("selected")&&void 0!==r.attr("disabled")?null:l(r);else if(r.is("optgroup")){if(o=k.replace("{{ text }}",r.attr("label")||"---").replace("{{ disabled }}",void 0!==r.attr("disabled")?" disabled":""),t(i.options[a]).children().length){o+="<ul>";for(var c=0,f=t(i.options[a]).children().length;f>c;c++){var u=t(i.options[a]).children().eq(c);o+=l(u)}o+="</ul>"}o+="</li>"}p[p.length]=o}return n=t(s),n.find(".dk_options_inner").html(p.join("")),n};p.init=function(e){return e=t.extend({},g,e),u=e.dropdownTemplate?e.dropdownTemplate:u,h=e.optionTemplate?e.optionTemplate:h,!s.fired&&s.fire(),this.each(function(){var i,n=t(this),a=n.find(":selected").first(),d=n.children(),o=n.data("dropkick")||{},l=n.attr("id")||n.attr("name"),s=n.parent(".dk_wrap"),p=e.width||s.length?s.width()-(n.innerWidth()-n.width()):n.outerWidth(),f=n.attr("tabindex")||"0",h=!!n.attr("disabled"),k=!1;return o.id?n:(o.settings=e,o.tabindex=f,o.id=l,o.$original=a,o.$select=n,o.value=y(n.val())||y(a.attr("value")),o.label=a.text()?a.text():"&nbsp;",o.options=d,o.theme=e.theme||"default",k=T(u,o),o.settings.autoWidth&&k.find(".dk_toggle").css({width:p+"px"}),h&&k.attr({disabled:"disabled",tabindex:-1}),n.before(k).appendTo(k.addClass("dk_theme_"+o.theme)),s.length?(s.removeClass("dk_wrap"),k.show()):k.fadeIn(e.startSpeed),o.$dk=k,n.data("dropkick",o),k.addClass(n.attr("class")),k.data("dropkick",o),c[c.length]=n,k.on({"focus.dropkick":function(){_=!k.attr("disabled")&&k.addClass("dk_focus")},"blur.dropkick":function(){k.removeClass("dk_focus"),_=null}}),r&&o.settings.nativeMobile&&k.addClass("dk_mobile"),o.settings.syncReverse&&n.on("change",function(e){var i=n.val(),a=t('a[data-dk-dropdown-value="'+i+'"]',k),d=a.text();k.find(".dk_label").html(d?d:"&nbsp;"),$(a.parent(),k,e),o.settings.change&&o.settings.change.call(n,i,d)}),i=n.attr("form")?t("#"+n.attr("form").replace(" ",", #")):n.closest("form"),void(i.length&&i.on("reset",function(){n.dropkick("reset")})))})},p.theme=function(e){var i=t(this).data("dropkick"),n=i.$dk,a="dk_theme_"+i.theme;i.theme=e||i.theme,n.removeClass(a).addClass("dk_theme_"+e)},p.reset=function(e){return this.each(function(){var i=t(this).data("dropkick"),n=i.$dk,a=t('a[data-dk-dropdown-value="'+i.$original.attr("value")+'"]',n);i.$original.prop("selected",!0),$(a.parent(),n),b(a,n,!e)})},p.setValue=function(e){return this.each(function(){var i=t(this).data("dropkick").$dk,n=t('.dk_options a[data-dk-dropdown-value="'+e+'"]',i);n.length&&b(n,i)|$(n.parent(),i)})},p.refresh=function(e){return this.each(function(){var i,n,a=t(this).data("dropkick"),d=a.$select,r=a.$dk;a.options=d.children(),n=T(u,a).find(".dk_options_inner"),r.find(".dk_options_inner").replaceWith(n),a.$original.parent().length||(a.$original=d.find(":selected").first(),a.label=a.$original.text()),i=t('a[data-dk-dropdown-value="'+d.val()+'"]',r),$(i.parent(),r),b(i,r,!e)})},p.destroy=function(){return this.each(function(){var e=t(this).data("dropkick");e.$dk.before(function(){return e.$select.removeData("dropkick")}).remove()})},p.clone=function(e,i,n){var a=[];t.each(this,function(d){var r=t(this).data("dropkick"),o=r.settings,l=r.$select.clone();o.autoWidth&&(o.width=r.$dk.find(".dk_label").width()),i&&l.attr({id:i}),n&&l.attr({name:n}),l.removeData("dropkick"),e===!1?a[d]=l[0]:(l.dropkick(o),a[d]=l.data("dropkick").$dk[0])})},p.disable=function(e){return this.each(function(){var i=t(this).data("dropkick"),n=i.$select,a=i.$dk;e===!1?(n.removeAttr("disabled"),a.removeAttr("disabled").attr({tabindex:i.tabindex})):(a.hasClass("dk_open")&&m(a),n.attr({disabled:"disabled"}),a.attr({disabled:"disabled",tabindex:-1}))})},t.fn.dropkick=function(t){if(!d){if(p[t])return p[t].apply(this,Array.prototype.slice.call(arguments,1));if("object"==typeof t||!t)return p.init.apply(this,arguments)}}})(jQuery,window,document);